<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.fpi.mapper.user.CouponMapper">
<!--    쿠폰갯수가 0이면 보여줄 화면이 달라져서 필요-->
    <select id="couponCount">
        select count(*)
        from tbl_coupon
        where USER_ID = #{userId}
    </select>
<!--   쿠폰 생성,쿠폰 유효기간은 3달-->
    <insert id="makeCoupon">
        insert into tbl_coupon
        values (SEQ_COUPON.nextval,#{couponNumber},add_months(sysdate,+3),default,#{discount},#{userId})
    </insert>
    <!--    쿠폰리스트에 뿌려주기 위해 필요-->
    <select id="couponInfo" resultType="CouponListDTO">
        select *
        from TBL_COUPON
        where USER_ID=#{userId}
    </select>
</mapper>